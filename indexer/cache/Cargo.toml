[package]
authors       = { workspace = true }
categories    = { workspace = true }
documentation = { workspace = true }
edition       = { workspace = true }
license       = { workspace = true }
name          = "indexer-cache"
repository    = { workspace = true }
rust-version  = { workspace = true }
version       = { workspace = true }

[lib]
path = "src/lib.rs"

[features]
http-request-details = []
metrics              = ["dep:metrics"]
tracing              = ["dep:tracing"]
s3                   = ["dep:aws-config", "dep:aws-sdk-s3", "dep:aws-credential-types"]

[dependencies]
async-stream       = { workspace = true }
async-trait        = { workspace = true }
borsh              = { workspace = true }
error-backtrace    = { workspace = true }
futures            = { workspace = true }
grug-app           = { workspace = true }
grug-types         = { workspace = true, features = ["chrono", "sea-orm"] }
indexer-disk-saver = { workspace = true, features = ["tracing"] }
metrics            = { workspace = true, optional = true }
serde              = { workspace = true }
serde_json         = { workspace = true }
strum              = { workspace = true }
strum_macros       = { workspace = true }
tempfile           = { workspace = true }
thiserror          = { workspace = true }
tokio              = { workspace = true, features = ["sync", "rt", "rt-multi-thread"] }
tokio-stream       = { workspace = true }
tracing            = { workspace = true, optional = true }
aws-config         = { workspace = true, optional = true }
aws-sdk-s3         = { workspace = true, optional = true }
aws-credential-types = { workspace = true, optional = true }

[dev-dependencies]
assertor  = { workspace = true }
test-case = { workspace = true }
