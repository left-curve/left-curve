http:
  services:
    {{ dango_network }}-dango:
      loadBalancer:
        servers:
          - url: "http://{{ deployment_name }}-dango-1:{{ dango_port }}"
    {{ dango_network }}-dango-metrics:
      loadBalancer:
        servers:
          - url: "http://{{ deployment_name }}-dango-1:{{ dango_metrics_port }}"
    {{ dango_network }}-frontend:
      loadBalancer:
        servers:
          - url: "http://{{ deployment_name }}-dango-frontend-1:{{ dango_frontend_port }}"
    {{ dango_network }}-faucet_bot:
      loadBalancer:
        servers:
          - url: "http://{{ deployment_name }}-faucet-bot-1:{{ faucet_port }}"
    {{ dango_network }}-cometbft_p2p:
      loadBalancer:
        servers:
          - url: "http://{{ deployment_name }}-cometbft-1:{{ cometbft_p2p_port }}"
    {{ dango_network }}-cometbft_rpc:
      loadBalancer:
        servers:
          - url: "http://{{ deployment_name }}-cometbft-1:{{ cometbft_rpc_port }}"
    {{ dango_network }}-cometbft_abci:
      loadBalancer:
        servers:
          - url: "http://{{ deployment_name }}-cometbft-1:{{ cometbft_abci_port }}"
    {{ dango_network }}-cometbft_metrics:
      loadBalancer:
        servers:
          - url: "http://{{ deployment_name }}-cometbft-1:{{ cometbft_metrics_port }}"
    {{ dango_network }}-db-metrics:
      loadBalancer:
        servers:
          - url: "http://{{ deployment_name }}-postgres-prometheus-1:{{ db_metrics_port }}"

  routers:
    {{ dango_network }}-dango:
      rule: "PathPrefix(`/`)"
      entryPoints:
        - "{{ dango_network }}-dango"
      service: "{{ dango_network }}-dango"

    {{ dango_network }}-dango-metrics:
      rule: "PathPrefix(`/`)"
      entryPoints:
        - "{{ dango_network }}-dango-metrics"
      service: "{{ dango_network }}-dango-metrics"

    {{ dango_network }}-frontend:
      rule: "PathPrefix(`/`)"
      entryPoints:
        - "{{ dango_network }}-frontend"
      service: "{{ dango_network }}-frontend"

    {{ dango_network }}-faucet_bot:
      rule: "PathPrefix(`/`)"
      entryPoints:
        - "{{ dango_network }}-faucet_bot"
      service: "{{ dango_network }}-faucet_bot"

    {{ dango_network }}-cometbft_p2p:
      rule: "PathPrefix(`/`)"
      entryPoints:
        - "{{ dango_network }}-cometbft_p2p"
      service: "{{ dango_network }}-cometbft_p2p"

    {{ dango_network }}-cometbft_rpc:
      rule: "PathPrefix(`/`)"
      entryPoints:
        - "{{ dango_network }}-cometbft_rpc"
      service: "{{ dango_network }}-cometbft_rpc"

    {{ dango_network }}-cometbft_abci:
      rule: "PathPrefix(`/`)"
      entryPoints:
        - "{{ dango_network }}-cometbft_abci"
      service: "{{ dango_network }}-cometbft_abci"

    {{ dango_network }}-cometbft_metrics:
      rule: "PathPrefix(`/`)"
      entryPoints:
        - "{{ dango_network }}-cometbft_metrics"
      service: "{{ dango_network }}-cometbft_metrics"

    {{ dango_network }}-db-metrics:
      rule: "PathPrefix(`/`)"
      entryPoints:
        - "{{ dango_network }}-db-metrics"
      service: "{{ dango_network }}-db-metrics"
