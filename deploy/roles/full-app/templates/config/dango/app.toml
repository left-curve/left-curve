# This is a TOML config file.
# For more information, see https://github.com/toml-lang/toml

# Logging verbosity: error|warn|info|debug|trace.
log_level = "info"

# Logging format: text|json.
log_format = "json"

################################################################################
###                            Grug Configuration                            ###
################################################################################

[grug]

# Capacity of the wasm module cache; zero means to not use a cache.
wasm_cache_capacity = 1000

# Gas limit when serving query requests.
query_gas_limit = 100000000

# Range of database keys that will be loaded into memory for better performance.
# Lower bound is inclusive, upper bound is exclusive.
priority_range = [
  "7761736d8dd37b7e12d36bbe1c00ce9f0c341bfe1712e73f", # = b"wasm" + dex_contract_address
  "7761736d8dd37b7e12d36bbe1c00ce9f0c341bfe1712e740", # = b"wasm" + increment_last_byte(dex_contract_address)
]

################################################################################
###                          Indexer Configuration                           ###
################################################################################

[indexer]

# Whether to enable indexer.
enabled = true

# Whether to store block respnonses.
keep_blocks = true

[indexer.s3]
# Optional S3-compatible storage for cached blocks
# If left empty, S3 upload is disabled.
enabled = false
# Optional path/prefix within the bucket for stored blocks
# For example: "dango/blocks" will store keys under that path.
access_key = ""
bucket     = ""
endpoint   = ""
path       = ""
region     = ""
secret_key = ""

[indexer.database]

# URL to the SQL database to be used by the indexer.
# This will get overwritten by ENV variables to include password.
url = "postgres://postgres@db:5432/grug_dev"

max_connections = 10

[indexer.clickhouse]

# URL to the Clickhouse database to be used by the indexer.
url = "http://clickhouse:8123"

user = "dango"

password = ""

database = "dango_prod"

[httpd]

# Whether to enable the HTTP server.
enabled = true

# IP address to listen on. `0.0.0.0` means all interfaces.
ip = "0.0.0.0"

# Port to listen on.
port = 8080

# Allowed origin for CORS.
#
# Wildcards are not supported here. To allow all origins, simply comment out
# this line.
cors_allowed_origin = "https://dango.exchange,https://dev.dango.exchange"

# This will be exposed
static_files_path = ""

[metrics_httpd]

# Whether to enable the HTTP server.
enabled = true

# IP address to listen on. `0.0.0.0` means all interfaces.
ip = "0.0.0.0"

# Port to listen on.
port = 9191

# Allowed origin for CORS.
#
# Wildcards are not supported here. To allow all origins, simply comment out
# this line.
#cors_allowed_origin = "*"

################################################################################
###                         Tendermint Configuration                         ###
################################################################################

[tendermint]

# Tendermint RPC listening address.
rpc_addr = "http://cometbft:26657"

# Tendermint ABCI listening address.
abci_addr = "0.0.0.0:26658"

################################################################################
###                        Transaction Configuration                         ###
################################################################################

[transactions]

# Chain identifier.
chain_id = ""

# Scaling factor to apply to simulated gas consumption.
gas_adjustment = 1.4

################################################################################
###                          Sentry Configuration                            ###
################################################################################

[sentry]

# Whether to enable Sentry.
enabled = false

# Enable the logs feature
enable_logs = false

# DSN to use for Sentry.
dsn = "https://your-dsn-here"

# Environment to use for Sentry.
environment = "development"

# Sample rate for Sentry.
sample_rate = 1.0

# Traces sample rate for Sentry.
traces_sample_rate = 1.0

################################################################################
###                         Telemetry Configuration                         ###
################################################################################

[trace]

# Whether to enable OpenTelemetry exporter.
enabled = false

# OTLP/gRPC collector endpoint (Tempo default gRPC port is 4317).
endpoint = "http://tempo:4317"

# Protocol used to export traces: "otlp_grpc" or "otlp_http".
protocol = "otlp_grpc"

[pyth]

# Pyth Lazer endpoints. This is a Vec<String>.
# If the list is empty, Pyth Lazer oracle is disabled.
endpoints = [
  "wss://pyth-lazer-0.dourolabs.app/v1/stream",
  "wss://pyth-lazer-1.dourolabs.app/v1/stream",
]

# Pyth Lazer access token.
# If the string is empty, Pyth Lazer oracle is disabled.
# You can override this with PYTH__ACCESS_TOKEN environment variable
access_token = ""
